/*!CK:3487298810!*//*1446436750,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["wmWV7"]); }

__d("PagesComposerPostActionsLoggerEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PUBLISH:"publish",SCRAPED:"scraped",UPLOAD:"upload",IMAGE_SELECT:"image_select",IMAGE_UNSELECT_ON_UPLOAD_BAR:"image_unselect_on_upload_bar",IMAGE_UNSELECT_ON_CAROUSEL_CARD:"image_unselect_on_carousel_card",IMAGE_UNSELECT_ON_LPP_CARD:"image_unselect_on_carousel_card",IMAGE_CHANGE_LEFT_RIGHT:"image_change_left_right",IMAGE_DRAG:"image_drag",LPP_DESCRIPTION_EDIT:"lpp_description_edit",CAROUSEL_DESCRIPTION_EDIT:"carousel_description_edit",LPP_TITLE_EDIT:"lpp_title_edit",CAROUSEL_TITLE_EDIT:"carousel_title_edit",CHILD_IMAGES_NUM_INCONSISTENT:"child_images_num_inconsistent",CHILD_IMAGES_LINK_INCONSISTENT:"child_images_link_inconsistent",ATTACHMENT_STYLE_INVALID:"attachment_style_invalid",EDIT_URL:"edit_url",CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB:"click_upload_photo_in_photo_tab",CLICK_UPLOAD_BUTTON_IN_TOOLBAR:"click_upload_button_in_toolbar",DRAG_PHOTO_TO_COMPOSER:"drag_photo_to_composer",CLICK_PHOTO_CAROUSEL_CREATE_TAB:"click_photo_carousel_create_tab",UNKNOWN:"unknown"};},null,{});
__d("PrivacyRemindersLoggingTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null,{});
__d("SuggestionConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"};},null,{});
__d("SuggestionUIPresentation",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5};},null,{});
__d('ComposerXAttachmentButtonBarState',['CSS','DOMQuery','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={trackCityChanges:function(m){var n=m.getComponent('citysharericon');if(n)return n.instance.subscribe('change',function(){l.updateMessageBoxBarState(m);});},updateMessageBoxBarState:function(m){var n=m.getComponent('citysharericon');if(n){var o=i.find(m.getRoot(),"._1dsp");h.conditionClass(o,"_icv",!!n.instance.getValue());}}};f.exports=l;},null);
__d('ComposerXAttachmentPrefillMixin',['Event','InputSelection'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={_initPrefill:function(k,l){this._textArea=k;this._didInitialFocus=false;this._prefill=l;if(this._prefill)this._focusListener=h.listen(this._textArea,'focus',this._prefillOnFocus.bind(this));},_resetPrefill:function(){this._didInitialFocus=false;},_prefillOnFocus:function(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===''){this._textArea.value=this._prefill;i.set(this._textArea,0,0);}this._didInitialFocus=true;}};f.exports=j;},null);
__d('ComposerXAttachmentUtils',['BrowserSupport','Button','ComposerXController','DataStore','DOMQuery','Event','Focus','Keys','Run','StickyPlaceholderInput','UserAgent_DEPRECATED','csx','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u='composer_fixed_placeholder';function v(x,y){if(!k.get(x.element,u,false))x.instance.setPlaceholder(y);}var w={initMentions:function(x,y,z,aa){v(x,y.toString());if(!aa||!aa.dontFocusMentions)w.focusMentions(x);this.registerMentionsForComposerCancel(x,z);},focusMentions:function(x){var y=l.find(x.element,'textarea.input');n.set(y);},registerMentionsForComposerCancel:function(x,y){j.registerConditionForComposerCancel(y,x.instance.hasChanges.bind(x.instance));},setStickyPlaceholderForMentions:function(x,y){v(x,y);},setPlaceholderIsFixed:function(x,y){k.set(x.element,u,!!y);},setStickyPlaceholderForTypeahead:function(x,y){var z=l.find(x,'.textInput');q.setPlaceholderText(z,y);},listenForPostSubmission:function(x){m.listen(x,'keydown',function(event){var y=event.getModifiers(),z=r.osx()?y.meta:y.control,aa=l.find(x.form,"._11b"+'[type="submit"]');if(event.keyCode===o.RETURN&&z&&i.isEnabled(aa)){x.blur();if(m.fire(aa,'click'))m.fire(x.form,'submit');event.preventDefault();}});},disableSaveOnEmpty:function(x,y){var z=l.find(x,'.textInput'),aa=t(function(ca){i.setEnabled(y,z.value.trim().length!==0);},50),ba=[];ba.push(m.listen(z,'keyup',aa));if(h.hasClipboardEvents()){ba.push(m.listen(z,'cut',aa));ba.push(m.listen(z,'paste',aa));}else{ba.push(m.listen(z,'mouseout',aa));ba.push(m.listen(z,'mousemove',aa));}p.onUnload(function(){for(var ca=0;ca<ba.length;ca++)ba[ca].remove();ba=null;});}};f.exports=w;},null);
__d('ComposerXAttachmentWithPreviews',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={initPreviewButton:function(j,k){h.inform('page_composer_preview_form_initialized',j);}};f.exports=i;},null);
__d('PagesComposerActionsLogger',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='pages_composer_actions',j='actions';function k(m){return {log:function(n,o){o=o?o:j;h.post(i+':'+o,n,m);},create:null};}var l=k();l.create=k;f.exports=l;},null);
__d('FirstPhotoUploadLogger',['DOM','Event','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={log:function(event,n,o){if(!n||!o)return;var p=h.scry(o,"._yr");if(p.length!==0&&event!==j.DRAG_PHOTO_TO_COMPOSER)return;k.log({event:event,target_id:n});},bindClickUpload:function(n,o,p){i.listen(o,'click',(function(){this.log(j.CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB,p,n);}).bind(this));}};f.exports=m;},null);
__d('ComposerXDragDrop',['Arbiter','ClipboardPhotoUploader','ComposerXAjaxEndpoint','ComposerXController','ComposerXDragDropUtils','ComposerXMediaUploadHandler','DragDropTarget','ErrorDialog','Event','FirstPhotoUploadLogger','PagesComposerPostActionsLoggerEvent','Promise','PUWMethods','URI','fbt','isAnimatedGif'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=j.MEDIA_UPLOAD,y=j.VIDEO_UPLOAD,z='/ajax/composerx/attachment/link/scraper/',aa=function(ca){ca();};function ba(ca,da,ea,fa){'use strict';this._root=ca;this._composerID=da;this._targetID=ea;fa=fa||aa;this._activatePasteHandler();this._dragdrop=new n(ca).setOnFilesDropCallback((function(ga){fa(this._dropFiles.bind(this,ga));}).bind(this)).setFileFilter(l.filterImages).enable();l.handleDragEnterAndLeave(ca);h.subscribe('composer/deactivateDragdrop',(function(){this.deactivate();}).bind(this));h.subscribe('composer/reactivateDragdrop',(function(){this.reactivate();}).bind(this));}ba.prototype.enableURLDropping=function(){'use strict';this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this));};ba.prototype.deactivate=function(){'use strict';this._dragdrop.disable();this._deactivatePasteHandler();};ba.prototype.reactivate=function(){'use strict';this._activatePasteHandler();this._dragdrop.enable();};ba.prototype._activatePasteHandler=function(){'use strict';if(this._pasteHandler)return;this._pasteHandler=p.listen(this._root,'paste',(function(event){var ca=i.getImages(event);if(!ca.length)return;this._uploadFiles(ca,t.COPYPASTE);}).bind(this));};ba.prototype._deactivatePasteHandler=function(){'use strict';if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler;};ba.prototype._uploadFiles=function(ca,da,ea){'use strict';if(ea){k.getAttachment(this._root,y);h.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/videoupload',{files:ca},h.BEHAVIOR_PERSISTENT);}else{k.getAttachment(this._root,x);h.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',{files:ca,method:da},h.BEHAVIOR_PERSISTENT);}};ba.prototype._dropFiles=function(ca){'use strict';var da=ca.map(function(fa){return new s(function(ga){if(fa.type==='image/gif'&&m.canUploadAnimatedGIF()){ga(w(fa));}else if(fa.type.match('video/*')){ga(true);}else ga(false);});});for(var ea=0;ea<da.length;ea++)if(da[ea]._value===false){q.log(r.DRAG_PHOTO_TO_COMPOSER,this._targetID,this._root);break;}s.all(da).then((function(fa){if(this.validateMediaTypes(fa))this._uploadFiles(ca,t.DRAGDROP,fa[0]);}).bind(this));};ba.prototype._onURLDrop=function(ca){'use strict';var da=new u(z);da.addQueryData({scrape_url:encodeURIComponent(ca)});k.getAttachment(this._root,da.toString());};ba.prototype.validateMediaTypes=function(ca){'use strict';if(ca.length>1){var da=false,ea=false;for(var fa=0;fa<ca.length;fa++)if(ca[fa]){da=true;}else ea=true;if(da&&ea){o.show(v._("Can't upload both videos and images"),v._("Please select either one video or one or more images."));return false;}}return true;};f.exports=ba;},null);
__d('PagesComposerEntryLogger',['Event','PagesEventObserver'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this.$PagesComposerEntryLogger1=k;}j.prototype.registerForContentEntryEvents=function(k){'use strict';var l=function(){var m={page_id:this.$PagesComposerEntryLogger1,event_name:'composer_content_entry',pages_composer:1,target_id:this.$PagesComposerEntryLogger1};i.logData_DEPRECATED(m,i.VITAL_WAIT);this.unregister();};this.$PagesComposerEntryLogger2=h.listen(k,{paste:l.bind(this),keydown:l.bind(this)});};j.prototype.unregister=function(){'use strict';if(!this.$PagesComposerEntryLogger2)return;for(var event in this.$PagesComposerEntryLogger2)this.$PagesComposerEntryLogger2[event].remove();this.$PagesComposerEntryLogger2=null;};f.exports=j;},null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});},null,{});
__d('ComposerXBootloadStatusAttachment',['requireWeak','Arbiter','AsyncRequest','Bootloader','ComposerXAttachment','ComposerXAttachmentButtonBarState','ComposerXAttachmentPrefillMixin','ComposerXAttachmentUtils','ComposerXAttachmentWithPreviews','ComposerXController','ComposerXDragDrop','ComposerXDragDropUtils','ComposerXMarauderLogger','ComposerXStore','CSS','DOM','DOMQuery','Event','Focus','ForceFetchAfterLongInactiveQE','NoNewerStoryInsertionWhileComposingGK','PageTransitions','PagesComposerEntryLogger','Parent','FocusListener','PrivacyConst','PrivacyRemindersLoggingTypes','ProductionPromptConfig','SelectorDeprecated','SubscriptionsHandler','SuggestionConfig','SuggestionUIPresentation','URI','XUIError','$','classWithMixins','createCancelableFunction','csx','cx','fbt','getActiveElement','mixin','requestAnimationFrame','XPrivacyRemindersDismissController','XPrivacyRemindersImpressionLoggingController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za){if(c.__markCompiled)c.__markCompiled();var ab,bb,cb;h('LitestandStoryInsertionStatus',function(gb){cb=gb;});var db={only_me:{PRIVACY_CONSTANT:[ga.BaseValue.SELF],LOG_IMPRESSION:ha.ONLY_ME_IMPRESSION,LOG_CONVERSION:ha.ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.EVERYONE_IMPRESSION,LOG_CONVERSION:ha.EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},delta_everyone:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.DELTA_EVERYONE_IMPRESSION,LOG_CONVERSION:ha.DELTA_EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:ha.EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:ha.PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},eb={};ab=babelHelpers.inherits(fb,qa(l,wa(n,p)));bb=ab&&ab.prototype;function fb(gb,hb){'use strict';bb.constructor.call(this);this._root=gb;this._config=hb;this._privacyReminders={};this._onSelectorChange=this._onSelectorChange.bind(this);if(cb&&ba.no_insertion_while_composing)if(aa.forceRefresh){cb.registerBlocker((function(){return this._isEditing();}).bind(this));}else cb.registerBlocker((function(){return this._isFocused();}).bind(this));}fb.prototype.getRoot=function(){'use strict';return this._root;};fb.prototype.getPrivacyInstance=function(){'use strict';return this._newPrivacyWidgetInstance;};fb.prototype._getTextArea=function(){'use strict';return x.find(this.getComponent('maininput').element,'textarea.input');};fb.prototype.initWithComponents=function(gb){'use strict';eb[this._composerID]=this;this._attachmentIsActive=true;var hb=this._getTextArea(),ib=x.scry(ea.byClass(this.getRoot(),"_119"),'li.'+this.attachmentClassName)[0];this._focusListener=y.listen(hb,'focus',this._onFocus.bind(this,'area_focus'));if(this._config.prefill_text)this._initPrefill(hb,this._config.prefill_text);if(gb&&this._config.targetIsPage){this._pagesComposerEntryLogger=new da(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(hb);}if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(this._isFocused()){this._onFocus('is_focused');}else if(ib)this._clickListener=y.listen(ib,'click',(function(){z.set(hb);}).bind(this));this._dragEnterHandler=i.subscribe('dragenter',(function(jb,kb){if(kb.element==this._root){i.inform('composerprivacy/aborteducation');var lb=kb.event.dataTransfer.items,mb;if(lb)mb=s.filterImages(lb);if(mb&&mb.length>0){z.set(hb);}else{var nb=ea.byClass(this._root,'focus_target');fa.expandInput(nb);this._onFocus('drag_focus');}}}).bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!gb)z.set(hb);if(this._config.plus_version){this._dragdrop=new r(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);if(this._config.previewButton)this.initPreviewButton(this._root,this._config.previewButton);ca.registerHandler(this.cleanup.bind(this));};fb.prototype._initPrivacyWidgetInstance=function(){'use strict';var gb=this.getComponent('mainprivacywidget');if(!gb)return;this._privacyWidgetElement=gb.element;this._newPrivacyWidgetInstance=gb.instance&&gb.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var hb=this.getComponent('maininput').instance&&this.getComponent('maininput').instance.getMentions(),ib=this.getComponent('tagExpansionButton');ib&&ib.instance&&ib.instance.listenToPrivacy(this._newPrivacyWidgetInstance,hb);}};fb.prototype._fullInitWithComponents=function(gb){'use strict';this._bootloadCallback=ra(this._bootloadModules.bind(this));if(gb&&gb.show_tag_expansion_reminder){k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI","ComposerTagReminder"],this._bootloadCallback);}else k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI"],this._bootloadCallback);Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._privacyReminders.delta_everyone&&this._privacyReminders.delta_everyone.dialog){var hb=this._privacyReminders.delta_everyone.dialog.getContent();if(hb){var ib=x.scry(hb,'.photoText')[0],jb=x.scry(hb,'.postText')[0];i.subscribe('multi-upload/images-added',(function(){ib&&v.show(ib);jb&&v.hide(jb);}).bind(this));i.subscribe('multi-upload/all-images-removed',(function(){ib&&v.hide(ib);jb&&v.show(jb);}).bind(this));}}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange);}else ja.subscribe('select',this._onSelectorChange);};fb.prototype._bootloadModules=function(gb,hb,ib,jb,kb){'use strict';this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new gb(this);if(kb){this._tagExpansionReminder=new kb(this);this._tagExpansionReminder.listen();}m.trackCityChanges(this);var lb=x.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new hb(lb);this._scraper.subscribe('match',(function(pb,qb){var rb=this._getScraperEndpoint();rb.addQueryData({scrape_url:encodeURIComponent(qb.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});var sb=this._config.isCarouselComposer;q.getAttachment(this._root,rb.toString(),null,sb);}).bind(this));}this._scraper.enable();this._scraper.check();var mb=w.scry(this._root,"._4-jj"),nb=this.getComposerID();if(this._config.stream_context==='home'&&mb&&mb.length&&this._tagger&&nb){if(!this._suggestionScraper){this._suggestionScraper=new ib(this._tagger,mb[0],[ma.SEMI_INLINE,ma.TAGGER_BADGE,ma.TOP_OF_VERBS],nb);this._suggestionScraper.setBootloadTriggerConfig(la.COMPOSER_ENTRY_BOOTSTRAP);}if(ia.gk){var ob=w.scry(this._root,'#bootloadSemiinlineRoot')[0];if(ob)v.hide(ob);}}};fb.prototype._showPrivacyReminder=function(gb){'use strict';var hb=this,ib=this._privacyReminders[gb],jb=db[gb],kb=null;if(this._newPrivacyWidgetInstance){kb=this._newPrivacyWidgetInstance.getSelectedBaseValue();}else kb=parseInt(ja.getValue(this._privacyWidgetElement),10);if(!ib||!ib.dialog||ib.shown){if(kb===ga.BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false;}return;}if(jb.PRIVACY_CONSTANT.indexOf(kb)===-1)return;ib.dialog.setContext(this._privacyWidgetElement).show();ib.shown=true;this._privacyReminderShown=true;if(jb.LOG_IMPRESSION){var lb=za.getURIBuilder().setString('type',jb.LOG_IMPRESSION).getURI();new j(lb).send();}if(jb.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(gb==='delta_everyone'||gb==='only_me'){var mb=ya.getURIBuilder().setString('type',gb).getURI();new j(mb).send();}else new j('/ajax/privacy/reminders/dismiss').setData({type:gb,dismiss_type:'impression'}).send();var nb=(function(event){var ob=v.hasClass(event.target,'layerConfirm')||x.scry(event.target,'^.layerConfirm').length===1,pb=v.hasClass(event.target,'layerButton')||x.scry(event.target,'^.layerButton').length===1;if(ob&&gb!=='public_posting_filter_nux'){if(gb==='delta_everyone'||gb==='only_me'){var qb=za.getURIBuilder().setString('type',ha.DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new j(qb).send();}return;}if(gb==='delta_everyone'||gb==='only_me'){var rb=ya.getURIBuilder().setString('type',gb).getURI();new j(rb).send();}else new j('/ajax/privacy/reminders/dismiss').setData({type:gb,hide:pb}).send();ib.events.forEach(function(tb){tb.remove();});ib.events=[];ib.dialog.hide();this._privacyReminderShown=false;if(pb){xa((function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector();}else ja.toggle(x.scry(hb.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}).bind(this));if(gb==='delta_everyone'){var sb=za.getURIBuilder().setString('type',ha.DELTA_EVERYONE_CHANGE_BUTTON_CLICKED).getURI();new j(sb).send();}}}).bind(this);if(this._newPrivacyWidgetInstance){ib.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',(function(ob,pb){var qb=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(ib,jb,qb);}).bind(this));}else ib.conversionListener=ja.subscribe('select',(function(ob,pb){if(pb.selector==this._privacyWidgetElement.firstChild){var qb=parseInt(ja.getValue(pb.option),10);this._logPrivacyReminderConversion(ib,jb,qb);}}).bind(this));ib.events=[y.listen(ib.dialog.getContent(),'click',nb),y.listen(ib.dialog.getContext(),'click',nb)];};fb.prototype._logPrivacyReminderConversion=function(gb,hb,ib){'use strict';if(hb.PRIVACY_CONSTANT.indexOf(ib)===-1){if(hb.LOG_CONVERSION){var jb=za.getURIBuilder().setString('type',hb.LOG_CONVERSION).getURI();new j(jb).send();}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(gb.conversionListener);}else ja.unsubscribe(gb.conversionListener);gb.conversionListener=null;}};fb.prototype._onSelectorChange=function(gb,hb){'use strict';if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||hb.selector===this._privacyWidgetElement.firstChild)setTimeout((function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);}).bind(this));if(this._tagExpansionReminder)this._tagExpansionReminder.updateReminderText(hb.post_param);};fb.prototype.cleanup=function(){'use strict';this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._clickListener){this._clickListener.remove();this._clickListener=null;}Object.keys(db).forEach((function(gb){var hb=this._privacyReminders[gb];if(hb&&hb.dialog&&hb.shown){hb.dialog.hide();hb.events.forEach(function(ib){ib.remove();});hb.events=[];if(hb.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(hb.conversionListener);}else ja.unsubscribe(hb.conversionListener);hb.conversionListener=null;}}).bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._modulesAreBootloaded){this._tagger.cleanup();if(this._privacyWidgetTags){this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;}this._scraper.disable();}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null;}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null;}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};fb.prototype.reset=function(){'use strict';var gb=ea.byClass(this._root,"child_was_focused");if(gb)v.removeClass(gb,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();if(ia.gk)this._config.mentionsPlaceholder=ua._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"]);};fb.prototype.canSwitchAway=function(){'use strict';return !ea.byClass(this._root,'async_saving');};fb.prototype.bootloadAttachments=function(){'use strict';if(this._bootloading)return;this._bootloading=true;q.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);};fb.prototype.setBootloadedContent=function(gb){'use strict';this._bootloading=false;this._setEveryonePrivacyImpression=!!gb.set_everyone_privacy_impression;Object.keys(db).forEach((function(kb){var lb=gb[kb+'_privacy_reminder'];if(lb)this._privacyReminders[kb]={dialog:lb};}).bind(this));if(gb.markup.privacy_widget){var hb=x.find(this._root,"._etn");w.setContent(hb,gb.markup.privacy_widget);var ib=x.find(this._root,"._1dwm");if(ib){ib.disabled=false;v.removeClass(ib,"_42fr");}}var jb=gb.placeholders.map(function(kb){return kb.component_name;});u.waitForComponents(this._composerID,jb,(function(){var kb=x.find(this._root,"._3-6"),lb=x.find(this._root,"._3-7");w.setContent(kb,gb.markup.tagger_content);w.setContent(lb,gb.markup.tagger_icons);if(gb.markup.privacy_widget)this._initPrivacyWidgetInstance();q.addPlaceholders(this._root,this,gb.placeholders);this._tagger=gb.tagger;m.updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(gb);o.registerMentionsForComposerCancel(this.getComponent('maininput'),this.getComposerID());}).bind(this));};fb.prototype._getScraperEndpoint=function(){'use strict';return new na('/ajax/composerx/attachment/link/scraper/');};fb.prototype._isFocused=function(){'use strict';return x.contains(this._root,va());};fb.prototype._isEditing=function(){'use strict';return this._isFocused()||this.getComponent('maininput').instance.hasChanges();};fb.prototype._onFocus=function(gb){'use strict';t.logEntry(this._composerID);var hb=w.scry(this._root,"._180_")[0];if(ia.gk&&this._config.stream_context==='home'&&hb){v.hide(pa('bootloadComposerPromptPlaceholder'));v.hide(pa('bootloadComposerPromptIcon'));var ib=pa('mentionsInput');w.find(ib,'textarea.mentionsTextarea').placeholder=ua._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"]);}this._prefillOnFocus();if(this._fullVersion||this._bootloading)return;i.inform('composer/focus',this._composerID);i.inform('composer/render_pab_nux');this.bootloadAttachments();};fb.prototype.allowOGTagPreview=function(){'use strict';return true;};fb.prototype._sendSetEveryonePrivacyImpression=function(){'use strict';new j('/ajax/privacy/reminders/set_everyone_privacy_impression').send();};fb.prototype.onEmptyStatusCallback=function(){'use strict';var gb=this._getTextArea();z.set(gb);oa.set({target:gb,message:ua._("This status update appears to be blank. Please write something or attach a link or photo to update your status."),position:'below',alignh:'left'});new ka().addSubscriptions(y.listen(this.getRoot(),'success',(function(){oa.clear(this._getTextArea());}).bind(this)),i.subscribe('composer/publish',(function(event,hb){if(hb.composer_id!=this.getComposerID())return;oa.clear(this._getTextArea());}).bind(this)));};fb.setBootloadedContent=function(gb,hb){'use strict';var ib=eb[gb];if(ib)ib.setBootloadedContent.call(ib,hb);};fb.onEmptyStatusListener=function(gb){'use strict';var hb=eb[gb];if(hb)hb.onEmptyStatusCallback.call(hb);};Object.assign(fb.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});f.exports=fb;},null);
__d('ComposerXMediaPostTab',['Arbiter','ComposerXMediaUploadHandler','Event'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';h.inform('composer/reset_pab_nux');var n=new i(l);j.listen(m.getContainer(),'click',function(){h.inform('composerprivacy/aborteducation');n.fetchAttachments();m.getInput().disabled=false;});m.subscribe('change',function(){n.handleFileSelected(m);});}f.exports=k;},null);
__d('ComposerXMentionsInputReset',['DOMQuery','Input'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){var l=h.scry(k.element,'textarea.input')[0];k.instance.reset();i.reset(l);}f.exports=j;},null);
__d('ComposerXOGTaggerIconReset',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){h.removeClass(k.element,"_4-jh");h.removeClass(k.element,"_509o");}f.exports=j;},null);
__d('ComposerXPrivacyWidgetReset',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){h.inform('Composer/changedtags',{withTags:[],mention:{},eventTag:false});}f.exports=i;},null);
__d('ComposerXTaggerIconReset',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){h.removeClass(k.element,"_1dsa");h.removeClass(k.element,"_1dsb");h.removeClass(k.element,"_509o");}f.exports=j;},null);
__d('EntstreamStoryDeduper',['DOM','csx','CSS'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o={};for(var p=0;p<m.length;p++){var q=m[p],r=q.getAttribute('data-dedupekey');if(o[r]){if(n){j.hide(q);}else h.remove(q);}else o[r]=1;}}var l={dedupe:function(m,n){n=n||"._5jmm";var o=h.scry(m,n);o=o.filter(function(p){return p.getAttribute('data-dedupekey');});k(o,false);},dedupeHide:function(m,n){n=n||"._5jmm";var o=h.scry(m,n),p=o.filter(function(q){return q.getAttribute('data-dedupekey')&&j.shown(q);});k(p,true);}};f.exports=l;},null);
__d('FeedLiveUpdateBar',['ArbiterMixin','Animation','BanzaiScuba','CurrentUser','DOM','DOMScroll','Ease','Event','Vector','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=300,s=false;function t(v){this.element=v;this.init();}function u(v){new j('feed_newstoriescard').addNormal('user_id',k.getID()).addNormal('event',v).addInteger('time',Math.round(Date.now()/1000)).addInteger('bar_at_top',1).post();}Object.assign(t.prototype,h,{init:function(){if(!this.element)return;this.hide();var v=l.find(this.element,"._2f6b");o.listen(v,'click',this._handleClick.bind(this));},_handleClick:function(event){if(s)u('click');this.hide();var v=new p(p.getScrollPosition().x,0,'document');m.scrollTo(v,r,false,false,0,(function(){m.scrollTo(v,0);this.inform('click');}).bind(this));event.kill();},setAtTop:function(){s=true;},hide:function(){s=false;new i(this.element).from('top',42).to('top',-50).ease(n.sineOut()).duration(250).hide().go();},show:function(){if(!this.element)return;new i(this.element).from('top',-50).to('top',42).ease(n.makePowerOut(3)).duration(400).show().go();if(s)u('render');}});f.exports=t;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(x,y,z){if(y&&p[y])return;if(!o){h.subscribe('page_transition',w);o=true;}if(!n){x();return;}y&&(p[y]=1);q.push(x);if(!z){if(s){j.onLeave(w);s=false;}r.push(q.length-1);}}var n,o,p={},q=[],r=[],s=true,t=500,u=k(function(){n=false;var x=q;q=[];r=[];p={};for(var y=0,z=x.length;y<z;++y)x[y]();},t);function v(){n=true;u();}function w(){var x=r;r=[];s=true;for(var y=0,z=x.length;y<z;++y)q[x[y]]=l;}i.listen(window,'scroll',v);f.exports=m;},null);
__d('LitestandOffscreenController',['Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','cx','csx','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=1,y=9,z=10,aa={},ba=false,ca,da,ea,fa,ga=[];function ha(){ca&&ca.release();ca=null;ba=false;}function ia(){aa={};ga=[];}function ja(){if(i.hasClass(document.body,"_5vb_"))return z;return y;}function ka(){fa=fa||q.getViewportDimensions().y;da=q.getScrollPosition().y;ea=da+fa;if(x){da-=fa*x;ea+=fa*x;}for(var sa in aa){var ta=aa[sa];ta.position=q.getElementPosition(ta.element).y;if(!ta.hidden)ta.height=ta.element.offsetHeight;}}function la(){var sa=[];for(var ta in aa){var ua=aa[ta],va=ua.position,wa=va+ua.height<da,xa=va>ea;if(!ua.hidden&&(wa||xa)){ma(ua);}else if(!wa&&!xa){ua.pendingHide=false;if(ua.hidden){if(ua.dirty&&va<da){sa.push(ta);i.addClass(na(ua),"_49nu");}else o.apply(ua.element,{height:'',marginBottom:''});i.show(na(ua));ua.dirty=false;ua.hidden=false;}}}if(!sa.length)return;var ya=0;u(function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];ya+=bb.height-na(bb).offsetHeight+o.getFloat(bb.element,'marginBottom');}},function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];i.removeClass(na(bb),"_49nu");o.apply(bb.element,{height:'',marginBottom:''});}ya&&n.setTop(document.body,n.getTop(document.body)-ya);});}function ma(sa){if(!sa.pendingHide){ga.push(sa);sa.pendingHide=true;}}function na(sa){if(sa.wrapperElement)return sa.wrapperElement;var ta=sa.element;if(ta.firstElementChild)return sa.wrapperElement=ta.firstElementChild;for(var ua=0;ua<ta.childNodes.length;ua++)if(ta.childNodes[ua].tagName)return sa.wrapperElement=ta.childNodes[ua];}function oa(){var sa=ja()+'px';for(var ta=0;ta<ga.length;ta++){var ua=ga[ta];if(j.scry(ua.element,"._52fb").length)ua.pendingHide=false;if(ua&&ua.element&&ua.pendingHide&&!ua.hidden){o.apply(ua.element,{height:ua.height+'px',marginBottom:sa});i.hide(na(ua));ua.hidden=true;ua.pendingHide=false;}}ga=[];}function pa(){v(oa,'LitestandOffscreenController/hide');u(ka,la,'LitestandOffscreenController');}function qa(){m.onLeave(ha);ca=new p();ca.addSubscriptions(h.subscribe(l.NAVIGATION_BEGIN,ia),k.listen(window,'scroll',w(pa)),k.listen(window,'resize',w(function(){fa=null;pa();})));ba=true;}var ra={attachSubstream:function(sa){ba||qa();aa[t(sa)]={element:sa};}};f.exports=ra;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','CSS','Event','LitestandMessages','LitestandStream','NavigationMessage','Run','Style','SubscriptionsHandler','UITinyViewportAction','ge','getScrollPosition','memoize','$','queryThenMutateDOM','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=1,aa,ba,ca=500,da=600,ea,fa;function ga(){fa&&clearTimeout(fa);fa=null;}function ha(){fa=setTimeout(function(){fa=null;ia();},ca);}function ia(){var bb;x(function(){bb=n.canInsertNewerStories();},function(){if(bb){ya();}else ha();},'LitestandNewStoryController/tryShowingStories');}var ja=0,ka,la=true,ma;function na(){if(!ma){ma=new r();ma.addSubscriptions(i.subscribe(o.NAVIGATION_BEGIN,va),l.listen(window,'resize',oa),l.listen(window,'scroll',ta));p.onLeave(va);}}function oa(){if(!qa())va();}var pa=v(function(){var bb=t('blueBarNAXAnchor');return bb&&k.hasClass(bb,'fixed_elem');});function qa(){return pa()&&!s.isTiny();}function ra(bb,cb){var db=t(bb);if(db)db.style.marginTop=cb?cb+'px':'';}function sa(bb){if(!qa()){bb=0;}else bb=Math.max(bb,0);ja=bb;ra('leftCol',bb);ra('rightCol',bb);}function ta(){var bb=u(window).y;if(bb<=0){va();return;}if(bb<ja){la=false;sa(bb);}if(ba&&bb>ba+50&&aa){aa.hide();ba=null;}ba=bb;}function ua(){if(!la){ka&&ka.stop();ka=null;}}function va(){if(ma){ma&&ma.release();la=false;sa(0);ma=null;if(aa){aa.hide();ba=null;}}}function wa(bb,cb){ka=new h(bb).from('opacity',0).to('opacity',1).duration(da);if(cb){la=true;for(var db=0;db<z;db++)ka.checkpoint(1,ua).from('opacity',1).to('opacity',0).duration(da).checkpoint().from('opacity',0).to('opacity',1).duration(da);}ka.go();}function xa(bb){ga();if(!ea)return;if(bb)var cb=u(window),db=ea.nextSibling,eb=db.offsetTop,fb=function(){sa(cb.y+db.offsetTop-eb);window.scrollTo(cb.x,ja);};q.apply(ea,{height:'',left:'',overflow:'',position:'',width:''});if(bb){fb();var gb=ea;y(function(){na();fb();wa(gb,true);if(aa){aa.setAtTop();aa.show();}});}else wa(ea,false);i.inform(m.STORIES_INSERTED);i.inform(m.NEWER_STORIES_INSERTED);setTimeout(function(){i.inform('reflow');},0);new j().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:n.getSectionID()}).send();ea=null;}function ya(){xa(qa());}function za(){xa(false);}var ab={waitForDisplay:function(bb){if(!ea)ea=w(bb);if(n.canInsertNewerStories()){ya();}else ha();},showStoriesNow:function(bb){ea=bb;za();},setNewStoryPill:function(bb){aa=bb;}};f.exports=ab;},null);
__d('LitestandStreamLoader',['Arbiter','Bootloader','CSS','DOM','EntstreamStoryDeduper','Event','ForceFetchAfterLongInactiveQE','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','LitestandStreamConfig','NavigationMessage','OnVisible','ReloadPage','Run','URI','UserActivity','$','ge','getElementPosition','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){if(c.__markCompiled)c.__markCompiled();var ga=0,ha=false,ia={},ja,ka,la,ma,na,oa,pa=0,qa,ra,sa=[],ta=60000,ua=30,va=200,wa=0,xa,ya;function za(){x.onLeave(ab);ga=0;sa=[h.subscribe(u.NAVIGATION_BEGIN,ab),h.subscribe(p.NEWER_STORIES_INSERTED,function(){ya=null;}),h.subscribe('useractivity/focus',function(){var qb=Date.now()-z.getLastLeaveTime(),rb=ua*ta,sb=va*ta;if(n.forceRefresh&&r.canInsert())if(qb>sb){w.now();}else if(qb>rb){var tb=new y('/home.php');tb.go();}})];sa.push(h.subscribe('layer_shown',function(qb,rb){if(rb&&rb.type==='DialogX')ga++;}),h.subscribe('layer_hidden',function(qb,rb){if(rb&&rb.type==='DialogX')ga--;}));r.registerBlocker(function(){return ga>0;});ha=true;}function ab(){h.inform(p.LEAVE_HOME);ia={};ra=null;pa=0;sa.forEach(h.unsubscribe);sa=[];ja&&ja.remove();na&&clearTimeout(na);na=null;ma=null;ya=null;qa&&qa.remove();qa=null;ha=false;wa=0;}function bb(qb){na&&clearTimeout(na);na=setTimeout(function(){na=null;hb();},qb);}function cb(){if(ra&&ma&&ra.pollIntervalMS&&ra.pollIntervalMS>1000){z.setIdleTime(ra.newStoryIdleTime);bb(ra.pollIntervalMS);}}function db(){ja=new v(k.find(ka,'a'),ob.bind(null),false,ra.bufferPixels);}function eb(){var qb=da(window).y;return qb>ra.firstPagerScrollBuffer;}function fb(){if(eb()){db();qa&&qa.remove();qa=null;}}function gb(qb){var rb=k.find(ka,'a');m.listen(rb,'click',function(event){ob();qa&&qa.remove();qa=null;event.preventDefault();});var sb=ca(ka),tb=ea();if(qb&&sb.y<tb.height){ob();}else if(qb&&!eb()){qa=m.listen(window,'scroll',fa(fb));}else db();}function hb(){if(!ma)return;if(!z.isActive(ra.newStoryIdleTime)){z.subscribeOnce(hb);return;}if(z.hasBeenInactive()){z.resetActiveStatus();var qb=ra.pollIntervalMS,rb=Date.now()-z.getLastInActiveEnds();if(rb<qb){bb(qb-rb);return;}}if(!s.canInsertNewerStories()){bb(ra.pollIntervalMS);return;}ib(false);}function ib(qb){if(!ma)return;na&&clearTimeout(na);if(!ya){var rb=s.getStreamRoot();ya=o.div({style:{height:0,width:rb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});k.prependContent(rb,ya);h.inform(p.NEW_STORIES_CONTAINER_CREATED,ya);}var sb=o.div(null);k.prependContent(ya,sb);i.loadModules(["UIPagelet"],function(tb){tb.loadFromEndpoint('LitestandNewerStoriesPagelet',sb,Object.assign(ma,{cursor:xa,containerID:k.getID(ya),fblogo:qb}),{crossPage:true});});}function jb(){var qb=k.getID(ka);j.addClass(ka,'async_saving');var rb=mb(),sb=rb.cursor,tb=rb.storiesCount;if(ia[sb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+sb);ia[sb]=sb;var ub={cursor:sb,pager_config:la,pager_id:qb,scroll_count:++pa,feed_stream_id:s.getFeedStreamID(),client_stories_count:tb};i.loadModules(["UIPagelet"],function(vb){vb.loadFromEndpoint(ra.pagerController,k.getID(oa),ub,{append:true,automatic:true,usePipe:true,crossPage:ra.crossPage,errorHandler:kb,transportErrorHandler:kb});});}function kb(qb){var rb=mb();delete ia[rb.cursor];j.removeClass(ka,'async_saving');}function lb(){var qb=nb();if(qb.length){return qb[0].getAttribute('data-cursor');}else return ka&&ka.getAttribute('data-cursor');}function mb(){var qb=nb(),rb={};if(qb.length){rb.cursor=qb[qb.length-1].getAttribute('data-cursor');rb.storiesCount=qb.length;}else{rb.cursor=ka&&ka.getAttribute('data-cursor');rb.storiesCount=0;}return rb;}function nb(){var qb=k.scry(oa,s.getStoriesSelector());return qb.filter(function(rb){return rb.getAttribute('data-cursor');});}function ob(){jb();ja&&ja.remove();ja=null;}var pb={register:function(qb,rb,sb,tb){ha||za();ra=babelHelpers._extends({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},rb);la=sb;oa=aa(qb);xa=lb();ka=tb;gb(true);cb();},removeOldPager:function(qb,rb){if(qb)k.remove(aa(qb));j.show(aa(rb));},removeLoadingIndicator:function(qb,rb){var sb=ba(qb);if(sb)k.remove(sb);j.show(rb);},moreStoriesInserted:function(qb){h.inform(p.STORIES_INSERTED,{substream_id:qb});var rb=aa(qb);if(t.hide_offscreen_substreams)q.attachSubstream(rb);},attachNewPager:function(qb){l.dedupeHide(s.getStreamRoot(),s.getStoriesSelector());ka=qb;ka&&gb(false);},setPollerData:function(qb){if(qb){ma=qb;cb();}},headLoadCompleted:function(qb){xa=qb.newCursor;cb();var rb=qb.stories;if(rb&&rb.length>0){for(var sb=rb.length-1;sb>=0;sb--)rb[sb].setAttribute('data-insertion-position',--wa);var tb=s.getStoriesSelector();l.dedupe(s.getStreamRoot(),tb);var ub=k.scry(ya,tb);h.inform('Stream/totalHeadLoadedStories',{count:-wa,hiddenCount:ub.length,fblogo:qb.fblogo});}},forceNewFetch:function(){ib(true);}};f.exports=pb;},null);
__d('PhotosUploadWaterfallMixin',['Flash','PhotosUploadWaterfall','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j,l={getUploaderApp:k,getWaterfallID:k,getAdditionalData:function(){return {};},logWaterfallStep:function(m,n,o){i.sendSignal(babelHelpers._extends({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,flash_version:h.getVersionString(),ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);},logWaterfallStepUsingBanzai:function(m,n,o){i.sendBanzai(babelHelpers._extends({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:m,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),n),o);}};f.exports=l;},null);
__d('PhotoSourceTypes',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({COMPUTER:null,POSTED_PHOTOS:null,SYNCED_PHOTOS:null,SUGGESTIONS:null,PAGES_POSTED_PHOTOS:null});},null);
__d('BaseSelectionContainer',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0;function i(){'use strict';this.$BaseSelectionContainer1=(h++).toString();}i.prototype.getSelectionContainerID=function(){'use strict';return this.$BaseSelectionContainer1;};i.prototype.getSource=function(){'use strict';throw 'This must be implemented by the child class';};i.prototype.getName=function(){'use strict';return null;};i.prototype.getSize=function(){'use strict';return null;};i.prototype.hasPlaceholderUI=function(){'use strict';throw 'This must be implemented by the child class';};f.exports=i;},null);
__d('SelectionSource',['PhotoSourceTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={FILE:'file',FLASH:'flash',VAULT:'vault',SUGGESTIONS:'suggestions',POSTED_PHOTOS:'posted_photos',PAGES_POSTED_PHOTOS:'pages_posted_photos',toPhotoSourceType:function(j){switch(j){case i.FILE:case i.FLASH:return h.COMPUTER;case i.VAULT:return h.SYNCED_PHOTOS;case i.SUGGESTIONS:return h.SUGGESTIONS;case i.POSTED_PHOTOS:return h.POSTED_PHOTOS;case i.PAGES_POSTED_PHOTOS:return h.PAGES_POSTED_PHOTOS;default:throw 'No mapping for SelectionSource: '+j;}}};f.exports=i;},null);
__d('FileSelectionContainer',['BaseSelectionContainer','SelectionSource'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this);this.$FileSelectionContainer1=m;}l.prototype.getFile=function(){'use strict';return this.$FileSelectionContainer1;};l.prototype.getSource=function(){'use strict';return i.FILE;};l.prototype.getName=function(){'use strict';return this.$FileSelectionContainer1.fileName||this.$FileSelectionContainer1.name;};l.prototype.getSize=function(){'use strict';return this.$FileSelectionContainer1.fileSize||this.$FileSelectionContainer1.size;};l.prototype.hasPlaceholderUI=function(){'use strict';return false;};f.exports=l;},null);
__d('FilePickerEvent',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={BEGIN:'FilePickerEvent/BEGIN',SELECT_START:'FilePickerEvent/SELECT_START',SELECTED:'FilePickerEvent/SELECTED_FILES',ALBUM_LIMIT_EXCEEDED:'FilePickerEvent/ALBUM_LIMIT_EXCEEDED',SESSION_LIMIT_EXCEEDED:'FilePickerEvent/SESSION_LIMIT_EXCEEDED',SELECT_CANCELED:'FilePickerEvent/SELECT_CANCELED',FALLBACK:'FilePickerEvent/FALLBACK'};},null);
__d('HTML5FilePicker',['ArbiterMixin','BrowserSupport','CSS','DOM','FilePickerEvent','FileSelectionContainer','Parent','PhotosUploadID','PhotosUploadWaterfall','PhotosUploadWaterfallMixin','PhotosUploadWaterfallXMixin','PUWApplications','URI','PUWSteps','createArrayFromMixed','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();function x(y,z){this._config=babelHelpers._extends({accept:undefined,multiple:undefined},z);this._button=y;this._beginInformed=false;if(!i.hasFileAPI()){this.logStep(u.CLIENT_PROCESS_UNAVAILABLE,{error:'no_file_api'});if(this._config.hasOwnProperty('fallbackFunction')){this._config.fallbackFunction.call(this);return;}var aa=new t(this._button.getAttribute('ajaxify'));this._button.setAttribute('ajaxify',aa.addQueryData({app:p.APP_FLASH}).toString());this.logWaterfallStep(p.FALLBACK_TO_FLASH);return;}this._subscriptions=[];var ba=this._config.input||k.create('input',{type:'file',className:"_n"});if(this._config.hasOwnProperty('accept'))ba.accept=this._config.accept;if(this._config.hasOwnProperty('multiple'))ba.multiple=this._config.multiple;if(this._config.hasOwnProperty('title'))ba.title=this._config.title;var ca=k.create('label',{className:'accessible_elem','for':k.getID(ba)},ba.title),da=k.create('div',{className:"_3jk"},[ca,ba]);j.addClass(this._button,"_m");k.appendContent(this._button,da);this._button.setAttribute('rel','ignore');this._bindInput(ba);var ea=n.byClass(this._button,'addPhotosDisabled');if(ea){j.removeClass(ea,'addPhotosDisabled');j.addClass(ea,'addPhotosEnabled');}}Object.assign(x.prototype,h,q,r,{getUploaderApp:function(){return p.APP_HTML5;},getWaterfallID:function(){return this._config.qn;},getWaterfallAppName:function(){return s.WEB_HTML5;},getWaterfallSource:function(){return this._config.ref;},getSwfID:function(){return null;},_constructFileList:function(){var y=v(this._input.files);y.forEach(function(z){z.uploadID=o.getNewID();});return y;},_constructFileSelectionContainerList:function(){var y=v(this._input.files);return y.map(function(z){return new m(z);});},cleanup:function(){if(this._input){this._input.onclick=null;this._input.onchange=null;}},_bindInput:function(y){this.cleanup();y.onclick=(function(){this.logWaterfallStep(p.SELECT_START);if(!this._beginInformed){this._beginInformed=true;this.inform(l.BEGIN||'FilePickerEvent/BEGIN');}this.inform(l.SELECT_START);}).bind(this);y.onchange=(function(){this.inform(l.SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()});this._bindInput(this._input.cloneNode(false));}).bind(this);if(this._input)k.replace(this._input,y);this._input=y;}});f.exports=x;},null);
__d('UploadSession',['AsyncRequest','FilePickerEvent','PhotosUploadWaterfall','PUWSteps','URI','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={};function o(q){'use strict';this._sessionID=q;this._asyncBootstrapped=false;this._controller=null;this._overlay=null;this._pickers=[];this._pendingFileLists=[];this._beginLogged=false;this._albumLimitWasExceeded=false;this._sessionLimitWasExceeded=false;}o.prototype.addFilePicker=function(q){'use strict';if(!m(this._pickers,q)){this._pickers.push(q);if(this._controller&&q.getSwfID&&q.getSwfID())this._controller.preregisterSwf&&this._controller.preregisterSwf(q.getSwfID());q.subscribe(i.BEGIN,(function(r,s){if(!this._beginLogged){this._beginLogged=true;q.logWaterfallStep(j.BEGIN);q.logStep(k.CLIENT_FLOW_BEGIN);}}).bind(this));q.subscribe(i.SELECTED,(function(r,s){q.logStep(k.CLIENT_SELECT_SUCCESS,{volume:s.files.length});if(this._controller){this._controller.uploadFiles(s.files);}else this._pendingFileLists.push(s);if(this._asyncBootstrapped)return;var t=q._button,u=new l(t.getAttribute('ajaxify'));u.addQueryData('num_selected',s.files.length);h.bootstrap(u.toString(),t,true);this._asyncBootstrapped=true;}).bind(this));q.subscribe(i.SELECT_START,(function(){q.logStep(k.CLIENT_SELECT_BEGIN);}).bind(this));q.subscribe(i.SELECT_CANCELED,(function(){q.logStep(k.CLIENT_SELECT_CANCEL);if(!this._overlay){q.logStep(k.CLIENT_FLOW_CANCEL);this._beginLogged=false;}}).bind(this));q.subscribe(i.ALBUM_LIMIT_EXCEEDED,(function(){if(this._controller){this._controller.albumLimitExceeded();}else this._albumLimitWasExceeded=true;}).bind(this));q.subscribe(i.SESSION_LIMIT_EXCEEDED,(function(){if(this._controller){this._controller.sessionLimitExceeded();}else this._sessionLimitWasExceeded=true;}).bind(this));}};o.prototype.addController=function(q){'use strict';this._controller=q;this._asyncBootstrapped=true;var r=this._controller.getWaterfallID?this._controller.getWaterfallID():this._controller.getWaterfallConfig().waterfallID,s=this._controller.getUploaderApp?this._controller.getUploaderApp():this._controller.getWaterfallConfig().waterfallApp;if(!this._beginLogged){this._beginLogged=true;j.sendSignal({qn:r,step:j.BEGIN,uploader:s});}if(this._pendingFileLists.length){var t=[];this._pendingFileLists.forEach(function(u){t=t.concat(u.files);});this._controller.uploadFiles(t);}else j.sendSignal({qn:r,step:j.OVERLAY_FIRST,uploader:s});if(this._albumLimitWasExceeded)this._controller.albumLimitExceeded();if(this._sessionLimitWasExceeded)this._controller.sessionLimitExceeded();};o.prototype.addOverlay=function(q){'use strict';this._overlay=q;};o.prototype.addOverlayAndController=function(q,r){'use strict';this.addOverlay(q);this.addController(r);};o.addFilePickerToSession=function(q,r){'use strict';p(q).addFilePicker(r);};o.addControllerToSession=function(q,r){'use strict';p(q).addController(r);};o.addOverlayToSession=function(q,r){'use strict';p(q).addOverlay(r);};o.addOverlayAndControllerToSession=function(q,r,s){'use strict';p(q).addOverlayAndController(r,s);};function p(q){if(!n[q])n[q]=new o(q);return n[q];}f.exports=o;},null);
__d("StoryTopicMap",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={registerTopics:function(j,k){h[j]=k;},getTopicsForFTID:function(j){return h[j]||[];}};f.exports=i;},null);
__d("XEventRelatedEventsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null,{});
__d("XSearchRelatedPostsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});},null,{});
__d("XFeedAdsChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null,{});
__d("XPubcontentFeedChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null,{});
__d("XPubcontentRelatedShareChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null,{});
__d("XPubcontentRelatedVideoChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null,{});
__d("XPubcontentTopicChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null,{});
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null,{});
__d("XRelatedGamesChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null,{});
__d("XTopicConversationFeedPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/discussions\/creation_unit\/",{});},null,{});
__d('PubcontentFeedChainingController',['AggregatedLinkComposerConfig','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CreateTopicConversationChainingConfig','CSS','csx','cx','DOM','DOMQuery','FeedAdsChainingConfig','NavigationMessage','PageLikeConstants','PubcontentFeedChainingConfig','PubcontentRelatedShareChainingConfig','PubcontentTopicChainingConfig','StoryInlinePivotChainingConfig','RelatedEventsPivotChainingConfig','Run','SearchRelatedPostsPivotChainingConfig','StoryTopicMap','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','XEventRelatedEventsPivotController','XSearchRelatedPostsPivotController','XFeedAdsChainingController','XPubcontentFeedChainingController','XPubcontentRelatedShareChainingController','XPubcontentRelatedVideoChainingController','XPubcontentTopicChainingController','XPubcontentInlineStoryPivotChainingController','XRelatedGamesChainingController','XTopicConversationFeedPivotChainingController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){if(c.__markCompiled)c.__markCompiled();var pa='ei',qa='ad_fan_page_action',ra='ad_like_page_post_action',sa='page_story_like_action',ta='related_share_article_click',ua='related_share_video_click',va='page_share_like_action',wa='topic_story_like_action',xa='story_click_for_pivot_action',ya='story_like_pivot_action',za='event_join',ab='comment_on_topic_conversation_target_action',bb='composer_publish_action';function cb(){'use strict';this.$PubcontentFeedChainingController1=u;this.$PubcontentFeedChainingController2=r;this.$PubcontentFeedChainingController3=v;this.$PubcontentFeedChainingController4=w;this.$PubcontentFeedChainingController5=x;this.$PubcontentFeedChainingController6=y;this.$PubcontentFeedChainingController7=aa;this.$PubcontentFeedChainingController8=l;this.$PubcontentFeedChainingController9={};this.registerEvents();cb.instance=this;}cb.prototype.registerEvents=function(){'use strict';if(this.$PubcontentFeedChainingController10)return;this.$PubcontentFeedChainingController10=new ca();this.$PubcontentFeedChainingController10.addSubscriptions(i.subscribe(s.NAVIGATION_BEGIN,this.$PubcontentFeedChainingController11.bind(this)),i.subscribe(t.LIKED,this.$PubcontentFeedChainingController12.bind(this)),i.subscribe(ea.ActionLinkLike,this.$PubcontentFeedChainingController13.bind(this)),i.subscribe(ea.ReactionButtonClicked,this.$PubcontentFeedChainingController13.bind(this)),i.subscribe(ea.ActionAddComment,this.$PubcontentFeedChainingController14.bind(this)),i.subscribe('composer/publish',this.$PubcontentFeedChainingController15.bind(this)),i.subscribe('LitestandComposer/publish',this.$PubcontentFeedChainingController15.bind(this)),i.subscribe(k.ARTICLE_CLICK,this.$PubcontentFeedChainingController16.bind(this)),i.subscribe(k.VIDEO_CLICK,this.$PubcontentFeedChainingController17.bind(this)),i.subscribe(k.FBVIDEO_CLICK,this.$PubcontentFeedChainingController18.bind(this)),i.subscribe(k.GAME_CLICK,this.$PubcontentFeedChainingController19.bind(this)),i.subscribe(k.PHOTO_CLICK,this.$PubcontentFeedChainingController20.bind(this)),i.subscribe(k.EVENT_JOIN,this.$PubcontentFeedChainingController21.bind(this)));z.onLeave(this.$PubcontentFeedChainingController11.bind(this));};cb.prototype.$PubcontentFeedChainingController11=function(){'use strict';this.$PubcontentFeedChainingController10&&this.$PubcontentFeedChainingController10.release();this.$PubcontentFeedChainingController10=null;};cb.getAdClientTokenIndex=function(){'use strict';return pa;};cb.prototype.$PubcontentFeedChainingController12=function(db,eb){'use strict';var fb=this.findAdClientToken(eb.target);if(fb){this.$PubcontentFeedChainingController22(eb.target,{origin:qa,actor_id:eb.profile_id,client_token:fb});}else this.$PubcontentFeedChainingController23(eb.target,{origin:eb.origin,actor_id:eb.profile_id});};cb.prototype.$PubcontentFeedChainingController14=function(db,eb){'use strict';if(!eb.feedback)return;var fb=this.$PubcontentFeedChainingController24(eb.target,{origin:ab,data:eb});if(!fb)return false;var gb=oa.getURIBuilder().getURI();new j(gb).setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setMethod('POST').setData({story_id:eb.feedback.entidentifier}).send();return true;};cb.prototype.$PubcontentFeedChainingController13=function(db,eb){'use strict';if(!eb.ft_id||!eb.target)return;if(!this.$PubcontentFeedChainingController26(this.findStory(eb.target))||this.$PubcontentFeedChainingController27(this.findStory(eb.target)))return;da.getFeedbackTarget(eb.ft_id,(function(fb,gb){var hb=this.findAdClientToken(fb);if(hb&&gb.isshare){this.$PubcontentFeedChainingController22(fb,{actor_id:gb.actorid,origin:ra,ft_id:gb.entidentifier,client_token:hb});}else if(gb.isownerpage){this.$PubcontentFeedChainingController23(fb,{actor_id:gb.actorid,content_id:gb.entidentifier,origin:sa});}else if(gb.isshare){this.$PubcontentFeedChainingController23(fb,{actor_id:gb.actorid,content_id:gb.entidentifier,ft_id:gb.entidentifier,origin:va});}else{var ib=ba.getTopicsForFTID(gb.entidentifier);if(ib&&ib.length>0){this.$PubcontentFeedChainingController28(fb,{ft_id:gb.entidentifier,origin:wa,pivotal_topic_ids:ib});}else this.$PubcontentFeedChainingController29(fb,{origin:ya,ft_id:gb.entidentifier});}}).bind(this,eb.target));};cb.prototype.$PubcontentFeedChainingController29=function(db,eb){'use strict';var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;var gb=ma.getURIBuilder().setString('origin',eb.origin);if(eb.story_id)gb.setString('storyid',String(eb.story_id));if(eb.ft_id)gb.setString('ftid',String(eb.ft_id));new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(gb.getURI()).setAllowCrossPageTransition(true).send();return true;};cb.prototype.$PubcontentFeedChainingController20=function(db,eb){'use strict';var fb=this;fb.$PubcontentFeedChainingController29(eb.attachment,{origin:xa,story_id:eb.storyid});};cb.prototype.$PubcontentFeedChainingController16=function(db,eb){'use strict';if(h.no_chained_related_stories==='true')return;eb.origin=ta;var fb=this,gb=this.findStory(eb.attachment),hb=q.scry(q.getRootElement(),'#initial_browse_result').length>0;if(hb)return;var ib;if(eb.is_right_click){ib=0;}else ib=k.EVENT_DELAY;setTimeout(function(){if(gb){var jb=fb.findAttachment(gb);if(jb)eb.attachment=jb;}fb.$PubcontentFeedChainingController30(eb.attachment,eb);},ib);};cb.prototype.$PubcontentFeedChainingController17=function(db,eb){'use strict';eb.origin=ua;var fb=this,gb=this.findStory(eb.attachment);setTimeout(function(){if(gb){var hb=fb.findAttachment(gb);if(hb)eb.attachment=hb;}fb.$PubcontentFeedChainingController30(eb.attachment,eb);},k.EVENT_DELAY);};cb.prototype.$PubcontentFeedChainingController18=function(db,eb){'use strict';eb.origin=ua;var fb=this,gb=this.findStory(eb.attachment);setTimeout(function(){if(gb){var hb=fb.findAttachment(gb);if(hb)eb.attachment=hb;}fb.$PubcontentFeedChainingController30(eb.attachment,eb);},k.EVENT_DELAY);};cb.prototype.$PubcontentFeedChainingController19=function(db,eb){'use strict';var fb=this,gb=this.findStory(eb.attachment);setTimeout(function(){if(gb)var hb=fb.findContainer(gb);fb.$PubcontentFeedChainingController31(gb,eb.global_share_id,p.getID(hb));},k.EVENT_DELAY);};cb.prototype.$PubcontentFeedChainingController21=function(db,eb){'use strict';var fb=this.findStory(eb.attachment);if(fb){var gb=this.findAttachment(fb);if(gb)eb.attachment=gb;}this.$PubcontentFeedChainingController32(eb.attachment,{origin:za,event_id:eb.event_id});};cb.prototype.$PubcontentFeedChainingController15=function(db,eb){'use strict';var fb=this;setTimeout(function(){fb.$PubcontentFeedChainingController33(eb.markup.firstChild,{origin:bb,content_id:eb.content_id});},this.$PubcontentFeedChainingController7.composer_publish_action);};cb.prototype.$PubcontentFeedChainingController34=function(db){'use strict';return !!(db&&db.id&&!m.hasClass(db,"_sf6")&&!(db.id in this.$PubcontentFeedChainingController9));};cb.prototype.$PubcontentFeedChainingController35=function(db){'use strict';if(!db)return false;if(db.origin in this.$PubcontentFeedChainingController1||db.origin in this.$PubcontentFeedChainingController3||db.origin in this.$PubcontentFeedChainingController2||db.origin in this.$PubcontentFeedChainingController5||db.origin in this.$PubcontentFeedChainingController6||db.origin in this.$PubcontentFeedChainingController8||db.origin in this.$PubcontentFeedChainingController7){return true;}else{var eb=this.$PubcontentFeedChainingController4[db.origin];if(!eb||!eb.rate)return false;var fb=Math.random();if(fb>eb.rate)return false;return true;}};cb.prototype.$PubcontentFeedChainingController36=function(db){'use strict';this.$PubcontentFeedChainingController9[db]=true;};cb.prototype.$PubcontentFeedChainingController25=function(db){'use strict';delete this.$PubcontentFeedChainingController9[db];};cb.prototype.$PubcontentFeedChainingController26=function(db){'use strict';if(!db)return false;var eb="_3lkn",fb=db.nextSibling,gb=true;if(fb&&fb.firstChild){var hb=fb.firstChild;gb=!(hb.hasChildNodes()&&m.hasClass(hb,eb));}if(!gb)return false;var ib=db.children[0],jb=db.children[1],kb="_4_ck";if(ib&&m.hasClass(ib,kb)||jb&&m.hasClass(jb,kb))return false;return true;};cb.prototype.$PubcontentFeedChainingController27=function(db){'use strict';if(!db)return true;var eb=p.scry(db,"._1xwr");if(eb.length)return true;return false;};cb.prototype.$PubcontentFeedChainingController24=function(db,eb){'use strict';var fb=this.findStory(db);if(!this.$PubcontentFeedChainingController34(fb))return null;if(!this.$PubcontentFeedChainingController35(eb))return null;this.$PubcontentFeedChainingController36(fb.id);if(this.isSponsoredStory(fb))return null;var gb;if(!eb.continued_chaining){gb=this.findContainer(fb);if(!gb)return null;var hb=p.create('div'),ib=p.appendContent(gb,hb);if(ib.length!==1)return null;}else{gb=fb;hb=p.create('div');ib=p.insertAfter(gb,hb);p.remove(gb);if(ib.length!==1)return null;}if(eb.is_auto_expand){return {chainingWrapper:ib[0],story:fb,is_auto_expand:eb.is_auto_expand};}else return {chainingWrapper:ib[0],story:fb};};cb.prototype.$PubcontentFeedChainingController22=function(db,eb){'use strict';var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;var gb=this.findStreamRoot(fb.story);if(!gb)return false;var hb=gb.getAttribute('id'),ib=ha.getURIBuilder().setString('actor_id',eb.actor_id).setString('origin',eb.origin).setString('ei',eb.client_token).setString('data_ownerid',hb);if(eb.ft_id)ib.setString('ft_id',eb.ft_id);new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(ib.getURI()).send();return true;};cb.prototype.$PubcontentFeedChainingController30=function(db,eb){'use strict';if(!this.$PubcontentFeedChainingController26(this.findStory(db)))return false;var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;m.addClass(fb.chainingWrapper,"_3lkn");var gb=null;if(eb.fbvideo_id){gb=ka.getURIBuilder();gb.setInt('fbvideo_id',eb.fbvideo_id);}else{gb=ja.getURIBuilder();gb.setInt('global_share_id',eb.global_share_id);}gb.setString('attachment_div_id',p.getID(eb.attachment));if(eb.link_url)gb.setString('link_url',eb.link_url);if(eb.video_div_id)gb.setString('video_div_id',eb.video_div_id);if(eb.share_id)gb.setString('share_id',eb.share_id);var hb=JSON.parse(fb.story.getAttribute('data-ft'))||{};if('qid' in hb&&'mf_story_key' in hb){gb.setString('qid',hb.qid);gb.setString('mf_story_key',hb.mf_story_key);}if(eb.is_auto_expand){this.$PubcontentFeedChainingController25(fb.story.id);gb.setBool('is_auto_expand',eb.is_auto_expand);}var ib=new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(gb.getURI());hb&&ib.setData(hb);ib.send();return true;};cb.prototype.$PubcontentFeedChainingController31=function(db,eb,fb){'use strict';if(!this.$PubcontentFeedChainingController34(db))return;this.$PubcontentFeedChainingController36(db.id);var gb=na.getURIBuilder().setInt('app_id',eb).setString('attachment_div_id',fb);new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,db.id)).setURI(gb.getURI()).send();return true;};cb.prototype.$PubcontentFeedChainingController23=function(db,eb){'use strict';var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;var gb=ia.getURIBuilder().setString('actor_id',eb.actor_id).setString('origin',eb.origin);if(eb.ft_id)gb.setString('ft_id',eb.ft_id);if(eb.content_id)gb.setString('content_id',eb.content_id);new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(gb.getURI()).send();return true;};cb.prototype.$PubcontentFeedChainingController28=function(db,eb){'use strict';var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;var gb=la.getURIBuilder().setIntVector('pivotal_topic_ids',eb.pivotal_topic_ids).getURI();new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(gb).send();return true;};cb.prototype.$PubcontentFeedChainingController32=function(db,eb){'use strict';var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;var gb=fa.getURIBuilder().setInt('event_id',eb.event_id).setString('attachment_id',p.getID(db)).getURI();new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(gb).send();return true;};cb.prototype.$PubcontentFeedChainingController33=function(db,eb){'use strict';var fb=this.$PubcontentFeedChainingController24(db,eb);if(!fb)return false;var gb=ga.getURIBuilder().setString('origin',eb.origin).setString('content_id',String(eb.content_id));new j().setErrorHandler(this.$PubcontentFeedChainingController25.bind(this,fb.story.id)).setRelativeTo(fb.chainingWrapper).setURI(gb.getURI()).setAllowCrossPageTransition(true).send();return true;};f.exports=cb;},null);
__d('PubcontentLitestandClassicChainingController',['ContextualThing','DOM','PubcontentFeedChainingController','csx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,j);m=l&&l.prototype;n.prototype.findStory=function(o){'use strict';var p="^div._4-u2",q=i.scry(o,p);return q.length===1?q[0]:null;};n.prototype.isSponsoredStory=function(o){'use strict';var p="._5paw";return i.scry(o,p).length>0;};n.prototype.findAttachment=function(o){'use strict';var p="div._6m2",q="div.iframeEmbed",r=i.scry(o,p)[0]||i.scry(o,q)[0];return r;};n.prototype.findContainer=function(o){'use strict';var p=i.create('div'),q=i.insertAfter(o,p);h.register(p,o);return q.length>=1?q[0]:null;};n.prototype.findStreamRoot=function(o){'use strict';var p="^div._4ikz";return i.scry(o,p)[0];};n.prototype.findAdClientToken=function(o){'use strict';var p=this.findStory(o);if(!p)return null;var q=p.getAttribute('data-ft');if(!q)return null;var r=JSON.parse(q);return r[j.getAdClientTokenIndex()];};n.prototype.init=function(){'use strict';this.registerEvents();};function n(){'use strict';l.apply(this,arguments);}f.exports=new n();},null);
__d("XFamilyMentionsNUXDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/family_mentions\/nux_dialog\/",{__asyncDialog:{type:"Int"}});},null,{});
__d('FamilyRelationshipMentions',['AsyncDialog','AsyncRequest','FamilyMentionsData','XFamilyMentionsNUXDialogController'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=(function(){var m={},n=false;m.shouldShowNUX=function(o){if(j.hasAcceptedNUX||n)return false;var p=o.family_names;if(p==undefined)return false;for(var q=0;q<p.length;q++)if(p[q]==o.text)return true;return false;};m.showNUX=function(o,p){var q=k.getURIBuilder().getURI();h.send(new i(q),function(r){r.subscribe('cancel',function(){o.text=o.default_name;new i().setURI('/ajax/family_mentions/deny_nux').send();p(o);});r.subscribe('confirm',function(){n=true;new i().setURI('/ajax/family_mentions/confirm_nux').send();p(o);r.finishHide();});});};return m;})();f.exports=l;},null);
__d('FeedAdsGapRuleViolationDetection',['Banzai','CSS','csx','cx','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={},ba={registerFeedStories:function(ca,da){if(ca.containerID=='substream_0'){w=[];x=[];}var ea=m(ca.containerID);if(!ea)return;z=babelHelpers._extends({},ca.demoAdChecks,z);var fa=l.scry(ea,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ha){return ha!==null;});if(ca.isLoggingEnabled&&fa.length!==0)this._logFeedLoad();if(ca.isNewerStories){w=fa.concat(w);}else w=w.concat(fa);for(var ga in ca.minGaps)if(ca.minGaps.hasOwnProperty(ga))aa[ga]=ca.minGaps[ga];if(n(z)){if(ca.isLoggingEnabled||ca.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ca,ea);if(ca.isLoggingEnabled||ca.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ca);}},_convertStoryNodeToObject:function(ca){if(i.hasClass(ca,"_170y"))return null;var da=ca.getAttribute('data-dedupekey');if(z[da])return null;var ea=l.scry(ca,"div._hye"),fa=l.scry(ca,"li._170x"),ga=[];if(ea.length!==0){ga=ea.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(fa.length!==0){ga=fa.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(ca.getAttribute('data-ft'))ga=[ca.getAttribute('data-ft')];if(!ga.length)return null;var ha=JSON.parse(ga[0]),ia={dataFTArray:ga,dedupKey:da,isSponsored:!!ha[o],height:ca.offsetHeight,qid:parseInt(ha[p],10),nodeID:ca.id};return ia;},_checkFirstPosViolation:function(ca,da){while(w.length>0&&w[0].isSponsored){var ea={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ca.firstStoryType},fa=l.scry(da,'.uiBoxRed')[0];if(fa){var ga=fa.textContent||fa.innerText;if(ga)ea.error_msg=ga;}if(ca.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(ea);y[w[0].dedupKey]=ea;}if(ca.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(ea);w.splice(0,1);}else break;}},_getMinGap:function(ca,da,ea){var fa=Math.min(ca?ca:Number.MAX_VALUE,da?da:Number.MAX_VALUE);return fa!==Number.MAX_VALUE?fa:ea;},_getStoryDedupKeysJSONString:function(ca,da){var ea=[];for(var fa=ca;fa<=da;fa++)ea.push(w[fa].dedupKey);return JSON.stringify(ea);},_getIdxOfStoryToSwap:function(ca,da){if(da>=w.length-ca)return -1;for(var ea=ca+1;ea<w.length&&da>0;ea++){if(!w[ea].isSponsored){da--;}else return -1;if(da===0)return ea;}return -1;},_checkGapRuleViolation:function(ca){var da=null,ea=null,fa=0;for(var ga=0;ga<w.length;ga++){var ha=w[ga];fa+=ha.height;if(ha.isSponsored){fa-=ha.height;var ia=false,ja=false;if(da!==null){var ka=ga-da,la=null,ma=this._getMinGap(aa[ea.dedupKey],aa[ha.dedupKey],ca.defaultMinGap);if(ka<ma){la=q;}else la=r;var na={ftArray_A:ea.dataFTArray,ftArray_B:ha.dataFTArray,dist:ka,pdist:fa,pos:ga+1,qid_A:ea.qid,qid_B:ha.qid,event_type:la,nodeid:ha.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(da,ga)};if(ca.isLoggingEnabled)if(!(ha.dedupKey in x)||x[ha.dedupKey].event_type!==la){this._logAdsGapEvent(na);x[ha.dedupKey]=na;}if(ca.isGapRuleInvalidationEnabled&&la==q){var oa=-1;if(ca.isSwapOnGapRuleViolationEnabled)oa=this._getIdxOfStoryToSwap(ga,ma-ka);if(oa>0){this._shiftAdBelowOrganicStory(ha.nodeID,w[oa].nodeID);var pa=w[ga];w.splice(ga,1);w.splice(oa,0,pa);if(ca.isLoggingEnabled){var qa={ft:w[oa].dataFTArray[0],dist:oa-ga,qid:w[oa].qid,event_type:'ad_swap'};h.post('feed_ads_gap_rule_violation',qa);}ja=true;ha=w[ga];fa+=ha.height;}else if(ca.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(na);ia=true;w.splice(ga--,1);}}}if(!ia&&!ja){da=ga;ea=ha;fa=0;}}}},_logFirstPosViolation:function(ca){var da={ft:ca.ftArray[0],event_type:s,intValues:{qid:ca.qid},first_story_type:ca.firstStoryType};if(ca.error_msg)da.error_msg=ca.error_msg;h.post('feed_ads_gap_rule_violation',da);},_logAdsGapEvent:function(ca){var da={ft_A:ca.ftArray_A[0],ft_B:ca.ftArray_B[0],event_type:ca.event_type,intValues:{dist:ca.dist,pdist:ca.pdist,pos:ca.pos,qid_A:ca.qid_A,qid_B:ca.qid_B},dedup_keys:ca.dedupKeys};h.post('feed_ads_gap_rule_violation',da);},_logFeedLoad:function(){var ca={event_type:t};h.post('feed_ads_gap_rule_violation',ca);},_invalidateFirstPosAd:function(ca){i.hide(m(ca.nodeid));var da={ft_array:ca.ftArray,event_type:u};h.post('feed_ads_gap_rule_violation',da);},_invalidateGapRuleViolatedAd:function(ca){var da=m(ca.nodeid);da&&i.hide(da);var ea={ft_array_A:ca.ftArray_A,ft_array_B:ca.ftArray_B,event_type:v};h.post('feed_ads_gap_rule_violation',ea);},_shiftAdBelowOrganicStory:function(ca,da){var ea=m(ca),fa=m(da);ea&&fa&&l.insertAfter(fa,ea);}};f.exports=ba;},null);
__d('StoryPositionTracking',['DOM','LitestandStream','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0;function m(p,q){var r=JSON.parse(p.getAttribute('data-ft'));if(r){r.insertion_position=q;p.setAttribute('data-ft',JSON.stringify(r));}}function n(p){return h.scry(p,"._5jmm");}var o={registerNewStories:function(p){if(p=='substream_0')l=0;var q=n(k(p)),r=q.length;for(var s=0;s<r;s++)m(q[s],l++);},updateAllStories:function(){var p=n(i.getStreamRoot()),q=p.length;l=0;for(var r=0;r<q;r++)m(p[r],l++);}};f.exports=o;},null);
__d('FbFeedAttachmentRelatedShare',['Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={loadRelatedAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.ARTICLE_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedGameAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.GAME_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedAttachmentForStream:function(o){var p=function(event,q){var r=event.getTarget();if(r.getAttribute('target')!=='_blank')return;var s="^div._5pbx",t="^div._5pc9",u=j.scry(r,s)[0]||j.scry(r,t)[0];if(!u)return;h.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:0,link_url:r.getAttribute('href'),is_right_click:q});};l(k.listen(o,'click',function(event){p(event,false);}));l(k.listen(o,'mousedown',function(event){if(event.which==3||event.button==2)p(event,true);}));}};f.exports=n;},null);
__d('FbFeedViewportTracking',['Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k);n=m&&m.prototype;o.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(h.subscribe([i.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),h.subscribe(i.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};o.prototype.getStorySelector=function(){'use strict';return "._5jmm";};o.prototype.getStream=function(){'use strict';return j.getStreamRoot();};o.prototype.getSessionID=function(){'use strict';return j.getFeedStreamID();};o.init=function(p){'use strict';o.instance=new o();o.instance.init(p);};o.getInstance=function(){'use strict';return o.instance;};function o(){'use strict';m.apply(this,arguments);}f.exports=o;},null);
__d('MentionsTypeaheadAreaView',['ContextualTypeaheadView','FamilyRelationshipMentions','Parent'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;m.prototype.getContext=function(){'use strict';return j.byClass(this.element,'uiMentionsInput');};m.prototype.shouldValidateTypeaheadSelection=function(n){'use strict';return i.shouldShowNUX(n);};m.prototype.validateTypeaheadSelection=function(n,o){'use strict';i.showNUX(n,o);};function m(){'use strict';k.apply(this,arguments);}f.exports=m;},null);